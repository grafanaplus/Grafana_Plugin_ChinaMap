{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","mapContainer","find","events","on","render","renderingCompleted","map","echarts","init","data","value1","value2","forEach","dataPoint","key","valueFormatted","option","backgroundColor","panel","tooltip","trigger","formatter","visualMap","min","max","left","top","text","calculable","series","name","type","mapType","selectedMode","label","normal","show","textStyle","color","emphasis","itemStyle","areaColor","borderColor","value","setOption","resize"],"mappings":";;;;;;AAEe,UAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrD,MAAMC,eAAeH,KAAKI,IAAL,CAAU,iBAAV,CAArB;;AAEAF,OAAKG,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7BC;AACAL,QAAKM,kBAAL;AACD,GAHD;;AAKA,WAASD,MAAT,GAAkB;AAChB;;AAEA,OAAI,CAACL,KAAKO,GAAV,EAAe;AACbP,SAAKO,GAAL,GAAWC,QAAQC,IAAR,CAAaR,aAAa,CAAb,CAAb,CAAX;AAED;;AAEJ,OAAMS,OAAOV,KAAKU,IAAlB;AACA,OAAIC,MAAJ;AACA,OAAIC,MAAJ;;AAEAF,QAAKG,OAAL,CAAa,UAACC,SAAD,EAAe;;AAE1B,QAAGA,UAAUC,GAAV,IAAiB,QAApB,EAA+BJ,SAAOG,UAAUE,cAAjB;AAC/B,QAAGF,UAAUC,GAAV,IAAiB,WAApB,EAAkCH,SAAOE,UAAUE,cAAjB;AAEhC,IALJ;;AAOA,OAAIC,SAAS;AACXC,qBAAiBlB,KAAKmB,KAAL,CAAWD,eADjB;AAEXE,aAAS;AACRC,cAAS,MADD;AAERC,gBAAW;AAFH,KAFE;AAMXC,eAAW;AACXC,UAAK,CADM;AAEXC,UAAK,EAFM;AAGXC,WAAM,MAHK;AAIXC,UAAK,QAJM;AAKXC,WAAM,CAAC,GAAD,EAAK,GAAL,CALK,EAKgB;AAC3BC,iBAAY;AAND,KANA;AAcXC,YAAQ,CACP;AACCC,WAAM,IADP;AAECC,WAAM,KAFP;AAGCC,cAAS,OAHV;AAICC,mBAAe,UAJhB;AAKCC,YAAO;AACNC,cAAQ;AACPC,aAAM,IADC;AAEPC,kBAAW;AACVC,eAAO;AADG;AAFJ,OADF;AAONC,gBAAU;AACTH,aAAM;AADG;AAPJ,MALR;AAgBCI,gBAAW;AACVL,cAAQ;AACPM,kBAAW,SADJ;AAEPC,oBAAa;AAFN,OADE;AAKVH,gBAAU;AACTE,kBAAW;AADF;AALA,MAhBZ;AAyBChC,WAAK,CACJ,EAACqB,MAAK,IAAN,EAAYa,OAAOjC,MAAnB,EADI,EAEJ,EAACoB,MAAK,IAAN,EAAYa,OAAOhC,MAAnB,EAFI;AAzBN,KADO;AAdG,IAAb;AA+CG;AACAZ,QAAKO,GAAL,CAASsC,SAAT,CAAmB5B,MAAnB;;AAEAjB,QAAKO,GAAL,CAASuC,MAAT;;AAIH;;;;;;;AAQE;AACF;;oBA1FuBlD,I;;;;AAFjBY,U","file":"map_renderer.js","sourcesContent":["import echarts from './lib/echarts.min';\r\n\r\nexport default function link(scope, elem, attrs, ctrl) {\r\n  const mapContainer = elem.find('.chinamap-panel');\r\n\r\n  ctrl.events.on('render', () => {\r\n    render();\r\n    ctrl.renderingCompleted();\r\n  });\r\n\r\n  function render() {\r\n    //if (!ctrl.data) return;\r\n\r\n    if (!ctrl.map) {\r\n      ctrl.map = echarts.init(mapContainer[0]);\r\n\t  \r\n    }\r\n\t\r\n\tconst data = ctrl.data;\r\n\tvar value1;\r\n\tvar value2;\r\n\t\r\n\tdata.forEach((dataPoint) => {\r\n      \r\n\t  if(dataPoint.key == 'sydney')  value1=dataPoint.valueFormatted;\r\n\t  if(dataPoint.key == 'singapore')  value2=dataPoint.valueFormatted;\r\n\t  \r\n    });\r\n\t\r\n\tvar option = {\r\n\t\t\tbackgroundColor: ctrl.panel.backgroundColor,\r\n\t\t\ttooltip: {\r\n\t\t\t\ttrigger: 'item',\r\n\t\t\t\tformatter: '{b}'\r\n\t\t\t},\r\n\t\t\tvisualMap: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 10,\r\n\t\t\tleft: 'left',\r\n\t\t\ttop: 'bottom',\r\n\t\t\ttext: ['高','低'],           // 文本，默认为数值文本\r\n\t\t\tcalculable: true\r\n\t\t\t},\r\n\t\t\tseries: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '中国',\r\n\t\t\t\t\ttype: 'map',\r\n\t\t\t\t\tmapType: 'china',\r\n\t\t\t\t\tselectedMode : 'multiple',\r\n\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\t\t\tcolor: '#f5f5f5'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\temphasis: {\r\n\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\tareaColor: '#2d3339',\r\n\t\t\t\t\t\t\tborderColor: '#404a59'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\temphasis: {\r\n\t\t\t\t\t\t\tareaColor: '#2a333d'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\t\t\r\n\t\t\t\t\tdata:[\r\n\t\t\t\t\t\t{name:'广东', value: value1},\r\n\t\t\t\t\t\t{name:'江苏', value: value2},\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n    // 使用刚指定的配置项和数据显示图表。\r\n    ctrl.map.setOption(option);\r\n\t\r\n    ctrl.map.resize();\r\n\t\r\n\t\t\r\n\r\n\t/*\r\n    if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\r\n\r\n    if (!ctrl.map.legend && ctrl.panel.showLegend) ctrl.map.createLegend();\r\n\r\n    ctrl.map.drawCircles();\r\n\t*/\r\n\t\r\n  }\r\n}"]}